<!DOCTYPE html>
<html>
	<head>
		<title>Domain Discovery</title>
		<meta name="description" content="A discovery system for High Fidelity domains">
		<meta name="author" content="Cutelab">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link href="/styles.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">

		<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	</head>
	<body>
		<div id="header">
			<div class="container">
				<table style="width: 100%;">
					<tr>
						<td>
							<a href="/"><h1>[title]</h1></a>
						</td>
						<!--logged-in
						<td style="text-align: right; padding-right: 20px;">
							<p style="margin-bottom: 2px;">Welcome back,<br><b>[username]</b></p>
						</td>
						<td style="width: 80px; text-align: center; background: rgba(29,31,33,0.2);">
							<a href="/profile" style="opacity: 1;">
								<svg class="icon" style="width: 32px; height: 32px; margin-bottom: -2px;" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
								<br>Profile
							</a>
						</td>
						<td style="width: 10px;"></td>
						<td style="width: 80px; text-align: center; background: rgba(29,31,33,0.2);">
							<a href="/api/logout" style="opacity: 1;">
								<svg class="icon" style="width: 28px; height: 28px; margin-bottom: 2px;" viewBox="0 0 512 512"><path d="M96 64h84c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H96c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h84c6.6 0 12 5.4 12 12v24c0 6.6-5.4 12-12 12H96c-53 0-96-43-96-96V160c0-53 43-96 96-96zm231.1 19.5l-19.6 19.6c-4.8 4.8-4.7 12.5.2 17.1L420.8 230H172c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h248.8L307.7 391.7c-4.8 4.7-4.9 12.4-.2 17.1l19.6 19.6c4.7 4.7 12.3 4.7 17 0l164.4-164c4.7-4.7 4.7-12.3 0-17l-164.4-164c-4.7-4.6-12.3-4.6-17 .1z"></path></svg>
								<br>Logout
							</a>
						</td>
						-->
						<!--logged-out
						<td style="width: 80px; text-align: center; background: rgba(29,31,33,0.2);">
							<a href="javascript:login()" style="opacity: 1;">
								<svg class="icon" style="width: 28px; height: 28px; margin-bottom: 2px;" viewBox="0 0 512 512"><path d="M416 448h-84c-6.6 0-12-5.4-12-12v-24c0-6.6 5.4-12 12-12h84c26.5 0 48-21.5 48-48V160c0-26.5-21.5-48-48-48h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zM167.1 83.5l-19.6 19.6c-4.8 4.8-4.7 12.5.2 17.1L260.8 230H12c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h248.8L147.7 391.7c-4.8 4.7-4.9 12.4-.2 17.1l19.6 19.6c4.7 4.7 12.3 4.7 17 0l164.4-164c4.7-4.7 4.7-12.3 0-17l-164.4-164c-4.7-4.6-12.3-4.6-17 .1z"></path></svg>
								<br>Login
							</a>
						</td>
						<td style="width: 10px;"></td>
						<td style="width: 80px; text-align: center; background: rgba(29,31,33,0.2);">
							<a href="javascript:register()" style="opacity: 1;">
								<svg class="icon" style="width: 32px; height: 32px; margin-bottom: -2px;" viewBox="0 0 24 24"><path d="M20.5 6c-2.61.7-5.67 1-8.5 1s-5.89-.3-8.5-1L3 8c1.86.5 4 .83 6 1v13h2v-6h2v6h2V9c2-.17 4.14-.5 6-1l-.5-2zM12 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"/></svg>
								<br>Register
							</a>
						</td>
						-->
					</tr>
				</table>
			</div>
		</div>
		<div id="login" class="popup" style="display: none; opacity: 0;">
			<div><div style="width: 300px;">
				<h1 style="margin-bottom: 16px;">Login here!</h1>
				<form method="POST" action="/api/login">
					<input type="name" required name="username" placeholder="Username/Email" />
					<input type="password" required name="password" placeholder="Password"/>
					<button class="g-recaptcha" data-sitekey="[recaptchaSiteKey]" data-callback="onLogin">Login</button>
				</form>
			</div></div>
		</div>
		<div id="register" class="popup" style="display: none; opacity: 0;">
			<div><div style="width: 300px;">
				<h1 style="margin-bottom: 16px;">Create an account!</h1>
				<form method="POST" action="/api/register">
					<input type="name" required name="username" placeholder="Username" />
					<input type="email" required name="email" placeholder="Email" />
					<input type="password" required name="password" placeholder="Password"/>
					<button class="g-recaptcha" data-sitekey="[recaptchaSiteKey]" data-callback="onRegister">Register</button>
				</form>
			</div></div>
		</div>
		<div id="install">
			<div class="container">
				<svg class="icon"><path d="M19 20v-2H5v2h14zm0-10h-4V4H9v6H5l7 7 7-7z"/></svg> Click here to install this discovery's app for <svg style="fill: #fff; display: inline-block; height: 16px; margin-bottom: -3px" viewBox="0 0 192 34"><path d="M36.864 27.221c.332 1.614 1.483 2.664 4.098 2.664a4.128 4.128 0 0 0 3.439-1.12 4.09 4.09 0 0 0 1.225-3.391v-2.761a6.95 6.95 0 0 1-5.854 3.402c-4.489 0-8.04-3.344-8.04-8.789v-.252c0-5.27 3.532-8.964 8.118-8.964a6.19 6.19 0 0 1 5.854 3.169V8.438h5.074v16.838c0 5.464-3.669 8.245-9.757 8.245-6.037 0-8.64-2.561-9.159-6.3h-.072l.059-.097.013.097h5.002zm144.782 5.698h-4.937l3.24-8.128-7.338-16.527h5.503l4.489 11.044 4.137-11.044h4.898l-9.992 24.655zm-55.228-15.148v-.272a9.102 9.102 0 0 1 2.63-6.862 9.17 9.17 0 0 1 6.855-2.705c4.781 0 9.016 2.781 9.016 9.353v1.4h-13.31a4.39 4.39 0 0 0 1.188 3.455 4.419 4.419 0 0 0 3.398 1.367c2.362 0 3.533-1.011 3.903-2.566h4.84c-.605 3.888-3.786 6.183-8.821 6.183a8.973 8.973 0 0 1-6.943-2.504 8.906 8.906 0 0 1-2.697-6.849h-.059zm-1.736 8.946h-5.074v-3.073a6.737 6.737 0 0 1-5.855 3.462c-4.488 0-8.02-3.209-8.02-9.334l-.098.02V17.5c0-6.047 3.493-9.605 8.118-9.605a6.172 6.172 0 0 1 5.855 3.169V.447h5.074v26.27zm42.933-18.531h3.903v3.616h-3.903v8.867c0 1.478.741 2.178 2.049 2.178a4.722 4.722 0 0 0 1.951-.35v3.889a9.79 9.79 0 0 1-3.122.486c-3.903 0-5.854-1.945-5.854-5.833l-.098.175V4.297h5.074v3.889zm-63.775.156v18.394h-5.094V8.342h5.094zm55.988 0v18.394h-5.093V8.342h5.093zM58.526 26.734h-5.055V.465h5.113v10.792a6.387 6.387 0 0 1 5.991-3.345c3.65 0 6.226 2.178 6.226 7.097v11.667h-5.133V15.748c0-2.489-.976-3.694-3.239-3.694a3.654 3.654 0 0 0-2.909 1.105 3.628 3.628 0 0 0-.994 2.939v10.636zM29.956 8.34v18.394h-5.074V8.34h5.074zM5.718 26.717H0V.447h5.718v11.395h10.128V.447h5.718v26.27h-5.718V16.353H5.718v10.364zm146.168 0h-5.074V.447h5.074v26.27zM96.482 4.92H86.003v7.777h9.562v4.278h-9.562v9.742h-5.718V.447h16.197V4.92zm23.243 12.697v-.273c0-3.655-1.62-5.522-4.411-5.522-2.79 0-4.449 1.945-4.449 5.581v.291c0 3.656 1.756 5.445 4.313 5.445 2.556 0 4.547-1.789 4.547-5.522zm-73.962-.566v-.233c0-3.13-1.659-5.036-4.45-5.036-2.79 0-4.449 2.042-4.449 5.056v.291a4.4 4.4 0 0 0 1.061 3.45 4.439 4.439 0 0 0 3.291 1.509 4.536 4.536 0 0 0 3.416-1.494 4.505 4.505 0 0 0 1.131-3.543zm94.179-1.497c-.175-2.78-1.6-4.102-4.039-4.102a4.208 4.208 0 0 0-4.216 4.102h8.255zM98.356 3.053a2.916 2.916 0 0 1 1.709-2.79 2.936 2.936 0 0 1 3.235.543 2.91 2.91 0 0 1 .698 3.193 2.926 2.926 0 0 1-2.715 1.834 2.81 2.81 0 0 1-2.908-2.78h-.019zm55.988 0a2.917 2.917 0 0 1 1.705-2.788 2.935 2.935 0 0 1 3.232.534 2.91 2.91 0 0 1 .711 3.187 2.927 2.927 0 0 1-2.701 1.847 2.813 2.813 0 0 1-2.044-.778 2.799 2.799 0 0 1-.864-2.002h-.039zM26.207.291a2.897 2.897 0 0 0-1.716 2.76c.005.753.314 1.472.858 1.995a2.82 2.82 0 0 0 2.031.786 2.907 2.907 0 0 0 2.709-1.804 2.888 2.888 0 0 0-.672-3.177 2.914 2.914 0 0 0-3.21-.56z"/></svg>
			</div>
		</div>
		<script type="text/javascript">
			var _GET = {};
			window.location.search.substr(1).split("&").forEach(function(e, i) {
				if (e=="") return;
				let param = e.split("=");
				_GET[param[0]] = decodeURI(param[1]);
			});

			// alert if ?alert=
			if (_GET.alert) alert(_GET.alert);

			// clear query params from url
			window.history.replaceState({}, document.title, window.location.pathname);

			// register login and register popups
			["login", "register"].forEach(name=>{
				window[name] = function() {
					let popup = document.getElementById(name);

					if (popup.style.display=="none") {
						// make visible
						popup.style.display = "block";
						setTimeout(()=>{
							popup.style.opacity = "1";
						}, 50);
					} else {
						popup.style.opacity = "0";
						setTimeout(()=>{
							popup.style.display = "none";
						}, 200);
					}
				}

				window["on"+name.slice(0,1).toUpperCase()+name.slice(1)] = function() {
					document.querySelector("#"+name+" form").submit();
				}

				document.getElementById(name).addEventListener("click", e=>{
					if (e.target==document.getElementById(name)) window[name]();
				});
			});
		</script>
		<div style="margin-bottom: 40px;"></div>
		[content]
	</body>
</html>